#ifndef MEMSYS_H
#define MEMSYS_H

#include "global_types.h"
#include "dram.h"

typedef struct MemSys MemSys;

////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////

struct MemSys {
  DRAM     *mainmem;
  uns64     lines_in_mainmem_rbuf;
};

////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////

MemSys *memsys_new(void);
Flag    memsys_access(MemSys *m, Addr lineaddr, uns coreid, uns robid, uns64 inst_num, Flag wb);
void    memsys_cycle(MemSys *m);
void    memsys_print_state(MemSys *m);
void    memsys_print_stats(MemSys *m);

///////////////////////////////////////////////////////////////////
///////////////////////////////////////////////////////////////////

#endif // MEMSYS_H
